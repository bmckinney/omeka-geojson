<!DOCTYPE html>
<html lang="en">
<head>
    <title>RootCellar</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon" href="icons/favicon.ico" />
    <link rel="icon" type="image/png" href="icons/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="icons/favicon-16x16.png" sizes="16x16" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>
    <script src="./geojson"></script>
   <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        #map {
            width: 600px;
            height: 400px;
        }
    </style>
    <style>body { padding: 0; margin: 0; } #map { height: 100%; width: 100vw; }</style>
</head>
<body>
<div id="map"></div>
<script>

    function onEachFeature(feature, layer) {
        var popupContent =
            "<h3>" + feature.properties.title +"</h3>" +
            "<a href='" + feature.properties.website + "' target='_blank'>" +
            "<img src='" + feature.properties.image + "' width='200' alt='" + feature.properties.title + "'></a>";
        layer.bindPopup(popupContent);
    }

    var blackIcon = new L.Icon({
        iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-black.png',
        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
    });

    var map = L.map('map').setView([42.8636302, -90.2013585], 16);
    // map.locate({setView: true, maxZoom: 16});

    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
        attribution: '',
        maxZoom: 22,
        id: 'mapbox.light',
        accessToken: 'accessToken'
    }).addTo(map);

    let jsonLayer = L.geoJSON(geojson, {
        onEachFeature: onEachFeature,
        pointToLayer: function(feature, latlng) { return L.marker(latlng, { icon: blackIcon }); }
    });
    jsonLayer.addTo(map);
    map.fitBounds(jsonLayer.getBounds());


</script>

</body>
</html>